{
  "project": "Estudio Maker - Roadmap de Ideas",
  "lastUpdated": "2024-12-19",
  "version": "1.0.0",
  "description": "Registro de ideas y cambios solicitados por el cliente para mejorar la aplicación",
  
  "highPriority": {
    "calendarDragAndDropBug": {
      "title": "Bug en Drag & Drop del Calendario",
      "description": "Cuando se arrastra un evento para modificar su duración, se crea un turno nuevo en lugar de modificar el existente",
      "status": "pending",
      "severity": "high",
      "currentBehavior": "Arrastrar evento crea nuevo turno en lugar de modificar el existente",
      "expectedBehavior": "Arrastrar evento debe modificar el turno existente (duración/horario)",
      "affectedFunctionality": [
        "Modificación de duración de turnos existentes",
        "Cambio de horario de turnos existentes",
        "Experiencia de usuario al editar eventos"
      ],
      "tasks": [
        "Investigar lógica de handleEventDrop en WeekView2",
        "Verificar que se identifique correctamente el evento a modificar",
        "Implementar lógica para modificar evento existente en lugar de crear nuevo",
        "Testear funcionalidad de drag & drop para modificar duración",
        "Testear funcionalidad de drag & drop para cambiar horario",
        "Implementar y testear funcionalidad de resize (cambiar duración arrastrando bordes)",
        "Verificar que handleEventResize funcione correctamente"
      ],
      "technicalNotes": "El problema parece estar en la lógica de handleEventDrop que no distingue entre crear nuevo evento y modificar existente. También hay funcionalidad de resize comentada que debería funcionar."
    },
    
    "businessModelChanges": {
      "title": "Cambios en el Modelo de Negocio",
      "description": "Ajustes necesarios para reflejar que NO hay walk-ins, todo es por turno",
      "status": "pending",
      "tasks": [
        "Remover/ocultar funcionalidad de walk-ins",
        "Ajustar flujo para que todo sea por turno programado",
        "Actualizar documentación y mensajes de usuario"
      ]
    },
    
    "paymentSimplification": {
      "title": "Simplificación del Sistema de Cobro",
      "description": "Hacer más sencillo el proceso de cobro, removiendo la complejidad de servicios separados",
      "status": "pending",
      "tasks": [
        "Remover/ocultar sección de servicios separada",
        "Integrar selección de servicio directamente en el evento del turno",
        "Implementar dropdown para selección de servicio en el evento",
        "Agregar campo de monto cobrado en el momento",
        "Simplificar interfaz de cobro"
      ],
      "notes": "Los servicios como color y cauterización dependen de variables (color, intensidad, largo del pelo) - no hay precio fijo. Solo el corte tiene precio fijo como referencia para señas."
    },
    
    "depositSystem": {
      "title": "Sistema de Señas para Nuevos Clientes",
      "description": "Implementar sistema donde los clientes nuevos paguen una seña por adelantado",
      "status": "pending",
      "tasks": [
        "Identificar clientes nuevos (primera cita)",
        "Implementar flujo de seña obligatoria para nuevos clientes",
        "Crear sistema de seguimiento de señas",
        "Integrar con el sistema de cobro simplificado"
      ]
    }
  },
  
  "mediumPriority": {
    "priceScraping": {
      "title": "Web Scraping de Precios de Competencia",
      "description": "Crear sistema para obtener precios de la competencia automáticamente",
      "status": "pending",
      "sources": [
        {
          "name": "Cerini",
          "url": "https://cerini.net/servicios/",
          "difficulty": "medium",
          "notes": "Página web estática, relativamente fácil de scrapear"
        },
        {
          "name": "Mala Peluquería",
          "url": "https://www.malapeluqueria.com/lista-de-precios",
          "difficulty": "high",
          "notes": "Genera PDF dinámicamente, será más complejo de scrapear"
        }
      ],
      "tasks": [
        "Crear pantalla dedicada para mostrar precios de competencia",
        "Implementar sistema de web scraping",
        "Configurar actualizaciones automáticas de precios (feature futuro - por ahora manual)",
        "Crear interfaz para visualizar y comparar precios",
        "Implementar sistema de alertas cuando cambien precios (feature futuro)"
      ],
      "technicalNotes": "Aunque será difícil, es factible. Considerar usar Puppeteer o similar para PDFs."
    },
    
    "notesSystem": {
      "title": "Sistema de Notas Mejorado",
      "description": "Cambiar de un solo bloque de texto a un sistema de notas listadas",
      "status": "pending",
      "currentSystem": "Un solo campo de texto donde se van agregando notas",
      "newSystem": "Lista de notas individuales con timestamp",
      "tasks": [
        "Rediseñar estructura de notas en la base de datos",
        "Crear sistema de notas individuales con fecha/hora",
        "Implementar ordenamiento: notas más nuevas arriba",
        "Crear interfaz para agregar nuevas notas",
        "Mantener historial completo de notas por cliente",
        "Implementar búsqueda y filtrado de notas"
      ],
      "benefits": [
        "Mejor organización de información",
        "Facilita seguimiento de evolución del cliente",
        "Permite búsqueda específica de notas",
        "Historial más claro y ordenado"
      ]
    }
  },
  
  "lowPriority": {
    "uiImprovements": {
      "title": "Mejoras de Interfaz",
      "description": "Ajustes menores de UX/UI basados en feedback",
      "status": "pending",
      "tasks": [
        "Revisar y mejorar flujo de creación de turnos",
        "Optimizar formularios de clientes",
        "Mejorar responsive design en móviles",
        "Agregar tooltips y ayuda contextual"
      ]
    },
    
    "debugComponentVisibility": {
      "title": "Ocultar Componente de Debug en Producción",
      "description": "El componente DataProviderDebug está siempre visible, debe ocultarse en producción",
      "status": "completed",
      "date": "2024-12-19",
      "issue": "Componente de debug visible en producción con información técnica",
      "solution": "Hacer el componente toggleable y más discreto",
      "changesMade": [
        "Modificado DataProviderDebug para ser toggleable con botón de bug",
        "Agregado botón flotante discreto para mostrar/ocultar debug",
        "Mejorado diseño y posicionamiento del componente"
      ],
      "benefits": [
        "Interfaz más limpia - debug solo visible cuando se necesita",
        "Botón discreto que no interfiere con la experiencia",
        "Mejor experiencia de usuario final"
      ]
    },
    
    "pwaButtonMobileConflict": {
      "title": "Resolver Conflicto de Botones en Móvil",
      "description": "El botón de instalación PWA se superpone con el botón de crear evento en móviles",
      "status": "completed",
      "date": "2024-12-19",
      "priority": "medium",
      "issue": "Botón PWA y botón de crear evento se superponen en la esquina inferior derecha en móviles",
      "solution": "Ocultar temporalmente el botón de instalación PWA en dispositivos móviles",
      "changesMade": [
        "Agregada detección de dispositivo móvil en InstallPWAButton",
        "Botón PWA no se muestra en pantallas < 768px o dispositivos móviles",
        "Mantenida funcionalidad PWA en desktop",
        "Resuelto conflicto visual en móviles"
      ],
      "benefits": [
        "Sin superposición de botones en móviles",
        "Mejor experiencia de usuario en dispositivos móviles",
        "Funcionalidad PWA mantenida en desktop",
        "Interfaz más limpia y funcional"
      ],
      "notes": "Solución temporal - se puede reactivar el botón PWA en móviles cuando se resuelva el conflicto de posicionamiento"
    },
    
    "mobileCalendarDayExpansion": {
      "title": "Vista Expandida de Día en Calendario Móvil",
      "description": "Implementar vista híbrida que permita ver la cuadrícula horaria detallada de un día específico",
      "status": "completed",
      "date": "2024-12-19",
      "priority": "medium",
      "issue": "En vista mensual móvil, los eventos se ven muy compactos y no se puede ver claramente la distribución horaria",
      "solution": "Vista híbrida con click simple para expandir día y mostrar cuadrícula horaria detallada",
      "changesMade": [
        "Agregado estado expandedDay para rastrear día expandido",
        "Implementado click simple para expandir/contraer día (eliminado long tap)",
        "Vista expandida como pantalla completa con z-index alto",
        "Header prominente con botón de retorno y título del día",
        "Cuadrícula horaria detallada de 9:00 AM a 9:00 PM",
        "Cada hora muestra eventos con hora de inicio/fin y estado",
        "Línea de tiempo visual para mejor organización",
        "Eventos clickeables para edición",
        "Indicadores visuales claros: 'Click para ver detalles' y 'Click para cerrar'",
        "Eliminados eventos touch/mouse complejos que causaban errores",
        "Resuelto error 'preventDefault inside passive event listener'",
        "Interfaz similar a Google Calendar para mejor UX",
        "Agregado botón de crear evento en vista del día",
        "Corregida alineación de bloques a intervalos de 30 minutos",
        "Mejorado formato de tiempo para evitar '16:06 a -16:06'",
        "Corregida superposición del título con calendario de fondo",
        "Corregida fecha por defecto al crear evento (ahora usa día seleccionado)",
        "Agregado debug para investigar eventos faltantes en vista del día",
        "Corregido filtrado estricto de eventos por slot de tiempo (ahora muestra todos los eventos del día)",
        "Corregido cálculo de horario de fin basado en durationMin en lugar de endDateTime",
        "Agregado debug adicional para verificar asignación correcta de eventos a slots temporales",
        "Corregido problema de zona horaria en filtrado de eventos (UTC vs hora local)"
      ],
      "benefits": [
        "Mejor legibilidad de eventos en móviles",
        "Vista detallada como pantalla completa prominente",
        "Distribución horaria clara de eventos",
        "Interfaz intuitiva con click simple = más detalles",
        "Sin errores de consola (preventDefault resuelto)",
        "Mejor organización visual de turnos por hora",
        "Experiencia similar a Google Calendar",
        "Navegación clara con botón de retorno"
      ],
      "technicalDetails": [
        "Detección de tap largo con setTimeout de 500ms",
        "Filtrado de eventos por hora específica",
        "Formato de fecha en español (EEEE, d 'de' MMMM)",
        "Estilos condicionales para día expandido",
        "stopPropagation para evitar conflictos de eventos"
      ],
      "userExperience": [
        "Tap simple: Navegación entre fechas",
        "Tap largo: Expandir día para ver detalles",
        "Vista expandida: Cuadrícula horaria con eventos",
        "Botón X: Cerrar vista expandida",
        "Indicador visual: 'Tap largo para cerrar'"
      ]
    },
    
    "desktopCalendarRedesign": {
      "title": "Rediseño del Calendario para Desktop",
      "description": "Crear nueva vista desktop inspirada en Google Calendar para mejor experiencia y distribución",
      "status": "completed",
      "date": "2024-12-19",
      "priority": "high",
      "inspiration": "Google Calendar desktop - diseño limpio y funcional",
      "currentIssues": [
        "Vista semanal con espacios desperdiciados",
        "Distribución menos eficiente del espacio",
        "Interfaz menos moderna y atractiva"
      ],
      "newFeatures": [
        "Sidebar izquierdo con mini calendario y botón de crear",
        "Header moderno con navegación intuitiva",
        "Vista semanal y mensual integradas",
        "Diseño limpio y profesional",
        "Mejor aprovechamiento del espacio disponible"
      ],
      "implementation": [
        "WeekView4.tsx creado con diseño inspirado en Google Calendar",
        "Sidebar con mini calendario y navegación",
        "Header con navegación y controles",
        "Vista semanal y mensual toggleable",
        "Integración automática en página principal"
      ],
      "filesCreated": [
        "src/app/components/WeekView4.tsx"
      ]
    },
    
    "calendarEventEditing": {
      "title": "Edición de Eventos del Calendario",
      "description": "Hacer que los eventos sean clickeables para editar en ambas vistas (móvil y desktop)",
      "status": "completed",
      "date": "2024-12-19",
      "priority": "high",
      "issue": "Los eventos no eran clickeables para editar",
      "solution": "Implementar funcionalidad de clic en eventos para abrir modal de edición",
      "changesMade": [
        "Agregado estado editing en WeekView3 (móvil) y WeekView4 (desktop)",
        "Eventos ahora son clickeables con cursor pointer y hover effects",
        "Modal de edición se abre al hacer clic en cualquier evento",
        "Integración con AppointmentForm existente para edición",
        "Tooltips informativos en eventos"
      ],
      "benefits": [
        "Mejor experiencia de usuario - eventos editables",
        "Funcionalidad completa de CRUD para turnos",
        "Consistencia entre vistas móvil y desktop",
        "Interfaz más intuitiva y profesional"
      ]
    },
    
    "miniCalendarFunctionality": {
      "title": "Funcionalidad del Mini Calendario",
      "description": "Hacer que el mini calendario en el sidebar funcione para navegación rápida",
      "status": "completed",
      "date": "2024-12-19",
      "priority": "medium",
      "issue": "El mini calendario no respondía a los clics y no mostraba el día seleccionado",
      "solution": "Implementar navegación y estado visual del día seleccionado en el mini calendario",
      "changesMade": [
        "Agregado onClick handler en cada día del mini calendario",
        "setRefDate se ejecuta al hacer clic en una fecha",
        "Agregado estado selectedDate para rastrear el día seleccionado",
        "Día seleccionado se resalta en azul (bg-blue-600)",
        "Día actual se resalta en azul claro (bg-blue-100) cuando no está seleccionado",
        "Tooltips informativos en cada día",
        "Navegación instantánea entre fechas"
      ],
      "benefits": [
        "Navegación rápida entre fechas",
        "Feedback visual claro del día seleccionado",
        "Mejor usabilidad del sidebar",
        "Funcionalidad completa del mini calendario",
        "Experiencia más profesional e intuitiva"
      ],
      "bugFix": "Corregido problema donde el día seleccionado no se resaltaba visualmente en el mini calendario"
    },
    
    "reporting": {
      "title": "Sistema de Reportes",
      "description": "Reportes adicionales para análisis de negocio",
      "status": "pending",
      "tasks": [
        "Reporte de clientes nuevos vs recurrentes",
        "Análisis de servicios más populares",
        "Reporte de señas y pagos pendientes",
        "Métricas de ocupación y eficiencia"
      ]
    }
  },
  
  "completed": {
    "pwaImplementation": {
      "title": "Implementación de PWA",
      "description": "Convertir la aplicación web en Progressive Web App",
      "status": "completed",
      "date": "2024-12-19",
      "features": [
        "Service Worker para funcionalidad offline",
        "Manifiesto para instalación",
        "Botón de instalación para iOS y Android",
        "Funcionalidad offline completa"
      ]
    },
    
    "calendarFormatting": {
      "title": "Ajuste de Formato del Calendario",
      "description": "Cambiar intervalos de tiempo en WeekView2 de 15 a 30 minutos",
      "status": "completed",
      "date": "2024-12-19",
      "currentFormat": "Rangos de 15 minutos",
      "newFormat": "Rangos de 30 minutos mínimo",
      "changesMade": [
        "Cambiado step de 15 a 30 minutos",
        "Ajustado timeslots de 4 a 2 para mantener proporción visual",
        "Mantenido horario de 9:00 AM a 10:00 PM"
      ],
      "benefits": [
        "Mejor legibilidad del calendario",
        "Más espacio para mostrar información de turnos",
        "Intervalos más prácticos para servicios de peluquería"
      ]
    },
    
    "mobileCalendarRedesign": {
      "title": "Rediseño del Calendario para Móvil",
      "description": "Crear nueva vista móvil inspirada en Google Calendar para mejor experiencia en dispositivos móviles",
      "status": "completed",
      "date": "2024-12-19",
      "priority": "high",
      "inspiration": "Google Calendar móvil - distribución compacta y eficiente",
      "implementation": [
        "WeekView3.tsx creado con interfaz móvil completa",
        "Hook useIsMobile implementado para detección automática",
        "Integración automática en página principal",
        "Vista responsive que se adapta al dispositivo",
        "Mantiene funcionalidad existente intacta"
      ],
      "filesCreated": [
        "src/app/components/WeekView3.tsx",
        "src/hooks/useIsMobile.ts"
      ]
    }
  },
  
  "technicalConsiderations": {
    "databaseChanges": [
      "Modificar estructura de servicios para integrar con turnos",
      "Agregar campos de seña y estado de pago",
      "Rediseñar sistema de notas",
      "Considerar migración de datos existentes"
    ],
    "apiChanges": [
      "Actualizar endpoints para nuevo flujo de cobro",
      "Crear APIs para sistema de señas",
      "Implementar web scraping endpoints",
      "Modificar sistema de notas"
    ],
    "frontendChanges": [
      "Rediseñar formularios de turnos",
      "Crear nueva pantalla de precios de competencia",
      "Implementar sistema de notas mejorado",
      "Actualizar flujo de cobro"
    ]
  },
  
  "nextSteps": [
    "Priorizar cambios de alto impacto (modelo de negocio)",
    "Crear mockups de nueva interfaz de cobro",
    "Planificar migración de base de datos",
    "Investigar tecnologías para web scraping",
    "Definir estructura de nuevo sistema de notas"
  ],
  
  "clientFeedback": {
    "keyInsights": [
      "No hay walk-ins - todo es por turno programado",
      "Sistema de cobro actual es muy complejo",
      "Necesitan flexibilidad en precios (no fijos para color/cauterización)",
      "Solo el corte tiene precio fijo como referencia",
      "Clientes nuevos deben pagar seña por adelantado",
      "Sistema de notas actual no es práctico para el negocio"
    ],
    "businessPriorities": [
      "Simplificar proceso de cobro",
      "Implementar sistema de señas",
      "Mantener precios competitivos",
      "Mejorar seguimiento de clientes",
      "Optimizar flujo de trabajo"
    ]
  },
  
  "questionsToInvestigate": {
    "eventEditingRule": {
      "title": "Regla de Edición de Eventos",
      "question": "¿Existía una regla que impedía editar eventos después de X horas?",
      "status": "RESOLVED",
      "description": "SÍ existe una regla implementada: no se pueden cancelar eventos de más de 24 horas",
      "currentRule": "No se pueden cancelar eventos de más de 24 horas. Solo se pueden marcar como completados.",
      "location": "src/lib/queries.ts - useUpdateAppointmentStatus",
      "implementation": [
        "Validación en handleEventDrop: no mover eventos al pasado",
        "Validación en handleEventDrop: no mover a tiempo pasado en el mismo día",
        "Regla de negocio: eventos > 24 horas solo pueden marcarse como 'done', no 'cancelled'"
      ],
      "notes": "La regla está implementada y funcionando correctamente. Se aplica tanto a citas únicas como recurrentes."
    }
  }
}
